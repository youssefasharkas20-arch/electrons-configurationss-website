<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electron Configuration Tool</title>
    <style>
        /* CSS STYLES - KEEPING EXISTING STYLES AND ADDING NEW ONES */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027, #1a1a2e);
            color: white;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(26, 26, 46, 0.9);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(57, 73, 171, 0.3);
        }
        header {
            background: linear-gradient(90deg, #1a237e, #283593, #3949ab);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        header:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>');
            opacity: 0.3;
        }
        h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            position: relative;
        }
        .subtitle {
            opacity: 0.9;
            margin-top: 10px;
            color: #bb86fc;
            font-size: 1.1rem;
            position: relative;
        }
        .main {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        /* Periodic Table Styles */
        .periodic-table-container {
            background: linear-gradient(135deg, #162447, #1e3a5f);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            grid-column: 1 / -1;
            border: 2px solid rgba(57, 73, 171, 0.4);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            grid-template-rows: repeat(7, 1fr);
            gap: 4px;
            margin: 0 auto;
            max-width: 950px;
        }
        
        .element-cell {
            background: #2a2a4a;
            border: 2px solid #3949ab;
            border-radius: 8px;
            padding: 10px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 55px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .element-cell:hover {
            background: #3949ab;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(57, 73, 171, 0.4);
            z-index: 10;
        }
        
        .element-cell:hover:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 1.5s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .element-symbol {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 2px;
        }
        
        .element-number {
            font-size: 11px;
            color: #bb86fc;
            position: absolute;
            top: 5px;
            left: 5px;
            font-weight: 600;
        }
        
        .element-mass {
            font-size: 9px;
            color: #82b1ff;
            margin-top: 3px;
            font-weight: 500;
        }
        
        .empty-cell {
            background: transparent;
            border: none;
        }
        
        /* Element categories coloring */
        .alkali-metal { background: #ff5722; border-color: #ff5722; }
        .alkaline-earth { background: #ff9800; border-color: #ff9800; color: #333; }
        .transition-metal { background: #2196f3; border-color: #2196f3; }
        .basic-metal { background: #4caf50; border-color: #4caf50; }
        .metalloid { background: #009688; border-color: #009688; }
        .nonmetal { background: #9c27b0; border-color: #9c27b0; }
        .halogen { background: #e91e63; border-color: #e91e63; }
        .noble-gas { background: #3f51b5; border-color: #3f51b5; }
        .lanthanide { background: #00bcd4; border-color: #00bcd4; color: #333; }
        .actinide { background: #673ab7; border-color: #673ab7; }
        
        .search-section {
            background: linear-gradient(135deg, #162447, #1e3a5f);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid rgba(57, 73, 171, 0.4);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .results-section {
            background: linear-gradient(135deg, #1f4068, #2a5298);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid rgba(100, 181, 246, 0.4);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        input {
            padding: 14px;
            width: 70%;
            background: rgba(15, 52, 96, 0.8);
            border: 2px solid #3949ab;
            color: white;
            border-radius: 8px;
            margin-right: 10px;
            margin-bottom: 15px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #00e5ff;
            box-shadow: 0 0 0 3px rgba(0, 229, 255, 0.2);
            background: rgba(15, 52, 96, 0.9);
        }
        
        button {
            padding: 14px 28px;
            background: linear-gradient(45deg, #3949ab, #536dfe);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        button:hover {
            background: linear-gradient(45deg, #536dfe, #00e5ff);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(83, 109, 254, 0.4);
        }
        
        .examples {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .ex-btn {
            padding: 10px 18px;
            background: rgba(26, 35, 126, 0.7);
            font-size: 0.95rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .ex-btn:hover {
            background: rgba(57, 73, 171, 0.9);
        }
        
        .config {
            font-family: 'Fira Code', 'Consolas', 'Courier New', monospace;
            font-size: 1.4em;
            padding: 25px;
            background: rgba(15, 52, 96, 0.8);
            border-radius: 10px;
            margin-top: 10px;
            min-height: 90px;
            border-left: 6px solid #00e5ff;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
        }
        
        .element-info {
            margin-top: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            border: 2px solid #bb86fc;
            box-shadow: 0 5px 15px rgba(187, 134, 252, 0.2);
        }
        
        .info-header {
            color: #bb86fc;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            background: rgba(0, 0, 0, 0.25);
            padding: 18px;
            border-radius: 8px;
            border-left: 5px solid #00e5ff;
            transition: transform 0.3s;
        }
        
        .info-item:hover {
            transform: translateY(-3px);
            background: rgba(0, 0, 0, 0.35);
        }
        
        .info-item strong {
            color: #82b1ff;
            font-size: 0.95rem;
            display: block;
            margin-bottom: 8px;
        }
        
        .valence-badge {
            background: linear-gradient(45deg, #e91e63, #ff4081);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            box-shadow: 0 4px 10px rgba(233, 30, 99, 0.3);
        }
        
        .mass-badge {
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        
        .badges-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            background: linear-gradient(90deg, #162447, #1e3a5f);
            color: #b0bec5;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 15px;
            font-size: 0.85rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .config-block {
            display: inline-block;
            margin: 5px;
            padding: 10px 18px;
            background: rgba(57, 73, 171, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(100, 150, 255, 0.4);
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .config-block:hover {
            background: rgba(57, 73, 171, 0.5);
            transform: translateY(-2px);
        }
        
        /* SIMPLIFIED ORBITAL DIAGRAM STYLES */
        .visualizations-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        
        .visualization-box {
            background: rgba(15, 52, 96, 0.8);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #bb86fc;
            box-shadow: 0 5px 15px rgba(187, 134, 252, 0.2);
            min-height: 250px;
        }
        
        .visualization-header {
            color: #bb86fc;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .orbital-diagram {
            display: flex;
            flex-direction: column;
            gap: 15px;
            font-family: 'Courier New', monospace;
        }
        
        .orbital-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .orbital-label {
            min-width: 40px;
            font-family: 'Courier New', monospace;
            color: #82b1ff;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .orbital-boxes {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .orbital-box {
            width: 32px;
            height: 32px;
            border: 2px solid #bb86fc;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .arrow {
            font-size: 1.1rem;
            font-weight: bold;
            position: absolute;
        }
        
        .arrow.up {
            color: #00e5ff;
            top: 4px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .arrow.down {
            color: #ff4081;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .empty-box {
            opacity: 0.3;
        }
        
        /* 3D ATOMIC MODEL STYLES */
        .atom-container {
            width: 100%;
            height: 250px;
            position: relative;
            perspective: 1000px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .atom-3d {
            width: 200px;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotateAtom 20s infinite linear;
        }
        
        @keyframes rotateAtom {
            0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
            100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg); }
        }
        
        .nucleus {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #ff5722, #ff9800);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255, 87, 34, 0.7);
            z-index: 10;
        }
        
        .electron-shell {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 2px dashed rgba(0, 229, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        .electron {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #00e5ff, #0097a7);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.8);
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }
        
        .electron-count {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            color: #00e5ff;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        /* Electron Dot Structure Styles */
        .dot-structure {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .dot-element {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .element-symbol-large {
            font-size: 2.5rem;
            font-weight: bold;
            color: #00e5ff;
            position: absolute;
            z-index: 2;
        }
        
        .dot-position {
            position: absolute;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffeb3b, #ff9800);
            box-shadow: 0 0 10px rgba(255, 235, 59, 0.5);
        }
        
        /* Search History Styles */
        .search-history {
            margin-top: 20px;
            background: rgba(15, 52, 96, 0.5);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(100, 181, 246, 0.3);
        }
        
        .history-header {
            color: #82b1ff;
            font-size: 1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .history-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .history-item {
            padding: 6px 12px;
            background: rgba(57, 73, 171, 0.3);
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .history-item:hover {
            background: rgba(57, 73, 171, 0.6);
            transform: translateY(-2px);
        }
        
        .clear-history {
            margin-top: 10px;
            padding: 6px 12px;
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
            color: #ff8a80;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-history:hover {
            background: rgba(244, 67, 54, 0.4);
        }
        
        /* Controls for 3D model */
        .model-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .control-btn {
            padding: 6px 12px;
            background: rgba(57, 73, 171, 0.3);
            border: 1px solid #bb86fc;
            color: #bb86fc;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: rgba(57, 73, 171, 0.6);
        }
        
        .model-info {
            text-align: center;
            margin-top: 10px;
            color: #82b1ff;
            font-size: 0.8rem;
        }
        
        @media (max-width: 1200px) {
            .main {
                grid-template-columns: 1fr;
            }
            
            .periodic-table {
                grid-template-columns: repeat(9, 1fr);
                font-size: 0.9em;
            }
            
            .element-cell {
                padding: 8px 3px;
                min-height: 48px;
            }
            
            .element-symbol {
                font-size: 14px;
            }
            
            .element-mass {
                font-size: 8px;
            }
            
            .visualizations-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .periodic-table {
                grid-template-columns: repeat(9, 1fr);
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            input {
                width: 100%;
                margin-right: 0;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .config {
                font-size: 1.2em;
                padding: 20px;
            }
            
            .badges-container {
                flex-direction: column;
                align-items: center;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
            
            .orbital-row {
                flex-wrap: wrap;
            }
            
            .orbital-box {
                width: 28px;
                height: 28px;
            }
            
            .dot-element {
                width: 100px;
                height: 100px;
            }
            
            .atom-3d {
                width: 150px;
                height: 150px;
            }
        }
        
        /* Loading animation for atomic mass */
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        .loading-mass {
            animation: pulse 1.5s ease-in-out infinite;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>⚛ Electron Configuration Tool</h1>
            <p class="subtitle">Complete element information with atomic mass, valence electrons, and interactive periodic table</p>
        </header>
        
        <div class="main">
            <div class="periodic-table-container">
                <div class="table-header">
                    <h3 style="color: #82b1ff; margin: 0;">
                        <i class="fas fa-table"></i> Interactive Periodic Table
                    </h3>
                    <div style="color: #bb86fc; font-size: 0.9rem;">
                        Click any element for details • Shows atomic mass
                    </div>
                </div>
                <div class="periodic-table" id="periodicTable">
                    <!-- Periodic table will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="search-section">
                <h3 style="color: #82b1ff; margin-bottom: 20px;">
                    <i class="fas fa-search"></i> Search Element
                </h3>
                <input type="text" id="elementInput" placeholder="Enter element symbol, name, or atomic number">
                <button onclick="searchElement()">
                    <i class="fas fa-atom"></i> Get Configuration
                </button>
                <div class="examples">
                    <div style="color: #bb86fc; font-size: 0.9rem; margin-bottom: 8px;">Quick examples:</div>
                    <button class="ex-btn" onclick="setExample('H')">Hydrogen (H)</button>
                    <button class="ex-btn" onclick="setExample('Na')">Sodium (Na)</button>
                    <button class="ex-btn" onclick="setExample('Fe')">Iron (Fe)</button>
                    <button class="ex-btn" onclick="setExample('Ag')">Silver (Ag)</button>
                    <button class="ex-btn" onclick="setExample('U')">Uranium (U)</button>
                </div>
                
                <!-- SEARCH HISTORY SECTION -->
                <div class="search-history" id="searchHistory">
                    <div class="history-header">
                        <i class="fas fa-history"></i> Search History
                    </div>
                    <div class="history-items" id="historyItems">
                        <!-- History items will be added here -->
                    </div>
                    <button class="clear-history" onclick="clearSearchHistory()">Clear History</button>
                </div>
            </div>
            
            <div class="results-section">
                <h3 style="color: #82b1ff; margin-bottom: 20px;">
                    <i class="fas fa-atom"></i> Electron Configuration
                </h3>
                <div class="config" id="configDisplay">
                    <div style="text-align: center; width: 100%; color: #bb86fc;">
                        <i class="fas fa-mouse-pointer fa-2x" style="margin-bottom: 10px;"></i>
                        <p>Click an element from the periodic table or search above</p>
                    </div>
                </div>
                
                <div class="element-info" id="elementInfo">
                    <div class="info-header">
                        <i class="fas fa-info-circle"></i> Element Information
                    </div>
                    <div id="infoContent">
                        <div style="text-align: center; color: #bb86fc; padding: 20px;">
                            <i class="fas fa-flask fa-3x" style="margin-bottom: 15px;"></i>
                            <p>Select an element to see detailed information including atomic mass and properties</p>
                        </div>
                    </div>
                    
                    <!-- UPDATED VISUALIZATIONS CONTAINER WITH 3D MODEL -->
                    <div class="visualizations-container" id="visualizationsContainer" style="display: none;">
                        <div class="visualization-box">
                            <div class="visualization-header">
                                <i class="fas fa-chart-bar"></i> Orbital Diagram
                            </div>
                            <div class="orbital-diagram" id="orbitalDiagram">
                                <!-- Orbital diagram will be generated here -->
                            </div>
                        </div>
                        
                        <div class="visualization-box">
                            <div class="visualization-header">
                                <i class="fas fa-circle"></i> Electron Dot Structure (Lewis)
                            </div>
                            <div class="dot-structure" id="dotStructure">
                                <!-- Electron dot structure will be generated here -->
                            </div>
                        </div>
                        
                        <!-- NEW 3D ATOMIC MODEL -->
                        <div class="visualization-box" style="grid-column: 1 / -1;">
                            <div class="visualization-header">
                                <i class="fas fa-atom"></i> 3D Atomic Structure Model
                            </div>
                            <div class="atom-container" id="atomContainer">
                                <div class="atom-3d" id="atom3D">
                                    <!-- 3D model will be generated here -->
                                </div>
                            </div>
                            <div class="model-controls">
                                <button class="control-btn" onclick="toggleRotation()">
                                    <i class="fas fa-pause"></i> Pause Rotation
                                </button>
                                <button class="control-btn" onclick="resetView()">
                                    <i class="fas fa-redo"></i> Reset View
                                </button>
                                <button class="control-btn" onclick="changeView('shells')">
                                    <i class="fas fa-circle"></i> Show Shells
                                </button>
                                <button class="control-btn" onclick="changeView('electrons')">
                                    <i class="fas fa-dot-circle"></i> Show Electrons
                                </button>
                            </div>
                            <div class="model-info" id="modelInfo">
                                Click an element to see its atomic structure
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Electron Configuration Tool • Complete Chemistry Reference</p>
            <div class="legend">
                <div class="legend-item"><span class="legend-color alkali-metal"></span> Alkali Metals</div>
                <div class="legend-item"><span class="legend-color alkaline-earth"></span> Alkaline Earth</div>
                <div class="legend-item"><span class="legend-color transition-metal"></span> Transition Metals</div>
                <div class="legend-item"><span class="legend-color basic-metal"></span> Basic Metals</div>
                <div class="legend-item"><span class="legend-color metalloid"></span> Metalloids</div>
                <div class="legend-item"><span class="legend-color nonmetal"></span> Nonmetals</div>
                <div class="legend-item"><span class="legend-color halogen"></span> Halogens</div>
                <div class="legend-item"><span class="legend-color noble-gas"></span> Noble Gases</div>
                <div class="legend-item"><span class="legend-color lanthanide"></span> Lanthanides</div>
                <div class="legend-item"><span class="legend-color actinide"></span> Actinides</div>
            </div>
        </footer>
    </div>

    <script>
    // COMPLETE DATABASE OF ALL 118 ELEMENTS WITH ATOMIC MASS
    const elements = {
        'H': {name: 'Hydrogen', atomicNumber: 1, config: '1s¹', electrons: 1, category: 'nonmetal', valence: 1, mass: 1.008, massUnit: 'u'},
        'He': {name: 'Helium', atomicNumber: 2, config: '1s²', electrons: 2, category: 'noble gas', valence: 2, mass: 4.0026, massUnit: 'u'},
        'Li': {name: 'Lithium', atomicNumber: 3, config: '1s² 2s¹', electrons: 3, category: 'alkali metal', valence: 1, mass: 6.94, massUnit: 'u'},
        'Be': {name: 'Beryllium', atomicNumber: 4, config: '1s² 2s²', electrons: 4, category: 'alkaline earth metal', valence: 2, mass: 9.0122, massUnit: 'u'},
        'B': {name: 'Boron', atomicNumber: 5, config: '1s² 2s² 2p¹', electrons: 5, category: 'metalloid', valence: 3, mass: 10.81, massUnit: 'u'},
        'C': {name: 'Carbon', atomicNumber: 6, config: '1s² 2s² 2p²', electrons: 6, category: 'nonmetal', valence: 4, mass: 12.011, massUnit: 'u'},
        'N': {name: 'Nitrogen', atomicNumber: 7, config: '1s² 2s² 2p³', electrons: 7, category: 'nonmetal', valence: 5, mass: 14.007, massUnit: 'u'},
        'O': {name: 'Oxygen', atomicNumber: 8, config: '1s² 2s² 2p⁴', electrons: 8, category: 'nonmetal', valence: 6, mass: 15.999, massUnit: 'u'},
        'F': {name: 'Fluorine', atomicNumber: 9, config: '1s² 2s² 2p⁵', electrons: 9, category: 'halogen', valence: 7, mass: 18.998, massUnit: 'u'},
        'Ne': {name: 'Neon', atomicNumber: 10, config: '1s² 2s² 2p⁶', electrons: 10, category: 'noble gas', valence: 8, mass: 20.180, massUnit: 'u'},
        'Na': {name: 'Sodium', atomicNumber: 11, config: '1s² 2s² 2p⁶ 3s¹', electrons: 11, category: 'alkali metal', valence: 1, mass: 22.990, massUnit: 'u'},
        'Mg': {name: 'Magnesium', atomicNumber: 12, config: '1s² 2s² 2p⁶ 3s²', electrons: 12, category: 'alkaline earth metal', valence: 2, mass: 24.305, massUnit: 'u'},
        'Al': {name: 'Aluminum', atomicNumber: 13, config: '1s² 2s² 2p⁶ 3s² 3p¹', electrons: 13, category: 'basic metal', valence: 3, mass: 26.982, massUnit: 'u'},
        'Si': {name: 'Silicon', atomicNumber: 14, config: '1s² 2s² 2p⁶ 3s² 3p²', electrons: 14, category: 'metalloid', valence: 4, mass: 28.085, massUnit: 'u'},
        'P': {name: 'Phosphorus', atomicNumber: 15, config: '1s² 2s² 2p⁶ 3s² 3p³', electrons: 15, category: 'nonmetal', valence: 5, mass: 30.974, massUnit: 'u'},
        'S': {name: 'Sulfur', atomicNumber: 16, config: '1s² 2s² 2p⁶ 3s² 3p⁴', electrons: 16, category: 'nonmetal', valence: 6, mass: 32.06, massUnit: 'u'},
        'Cl': {name: 'Chlorine', atomicNumber: 17, config: '1s² 2s² 2p⁶ 3s² 3p⁵', electrons: 17, category: 'halogen', valence: 7, mass: 35.45, massUnit: 'u'},
        'Ar': {name: 'Argon', atomicNumber: 18, config: '1s² 2s² 2p⁶ 3s² 3p⁶', electrons: 18, category: 'noble gas', valence: 8, mass: 39.948, massUnit: 'u'},
        'K': {name: 'Potassium', atomicNumber: 19, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s¹', electrons: 19, category: 'alkali metal', valence: 1, mass: 39.098, massUnit: 'u'},
        'Ca': {name: 'Calcium', atomicNumber: 20, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s²', electrons: 20, category: 'alkaline earth metal', valence: 2, mass: 40.078, massUnit: 'u'},
        'Sc': {name: 'Scandium', atomicNumber: 21, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹', electrons: 21, category: 'transition metal', valence: 3, mass: 44.956, massUnit: 'u'},
        'Ti': {name: 'Titanium', atomicNumber: 22, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d²', electrons: 22, category: 'transition metal', valence: 4, mass: 47.867, massUnit: 'u'},
        'V': {name: 'Vanadium', atomicNumber: 23, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d³', electrons: 23, category: 'transition metal', valence: 5, mass: 50.942, massUnit: 'u'},
        'Cr': {name: 'Chromium', atomicNumber: 24, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s¹ 3d⁵', electrons: 24, category: 'transition metal', valence: 6, mass: 51.996, massUnit: 'u'},
        'Mn': {name: 'Manganese', atomicNumber: 25, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁵', electrons: 25, category: 'transition metal', valence: 7, mass: 54.938, massUnit: 'u'},
        'Fe': {name: 'Iron', atomicNumber: 26, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁶', electrons: 26, category: 'transition metal', valence: 2, mass: 55.845, massUnit: 'u'},
        'Co': {name: 'Cobalt', atomicNumber: 27, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁷', electrons: 27, category: 'transition metal', valence: 2, mass: 58.933, massUnit: 'u'},
        'Ni': {name: 'Nickel', atomicNumber: 28, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁸', electrons: 28, category: 'transition metal', valence: 2, mass: 58.693, massUnit: 'u'},
        'Cu': {name: 'Copper', atomicNumber: 29, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s¹ 3d¹⁰', electrons: 29, category: 'transition metal', valence: 1, mass: 63.546, massUnit: 'u'},
        'Zn': {name: 'Zinc', atomicNumber: 30, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰', electrons: 30, category: 'transition metal', valence: 2, mass: 65.38, massUnit: 'u'},
        'Ga': {name: 'Gallium', atomicNumber: 31, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p¹', electrons: 31, category: 'basic metal', valence: 3, mass: 69.723, massUnit: 'u'},
        'Ge': {name: 'Germanium', atomicNumber: 32, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p²', electrons: 32, category: 'metalloid', valence: 4, mass: 72.630, massUnit: 'u'},
        'As': {name: 'Arsenic', atomicNumber: 33, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p³', electrons: 33, category: 'metalloid', valence: 5, mass: 74.922, massUnit: 'u'},
        'Se': {name: 'Selenium', atomicNumber: 34, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁴', electrons: 34, category: 'nonmetal', valence: 6, mass: 78.971, massUnit: 'u'},
        'Br': {name: 'Bromine', atomicNumber: 35, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁵', electrons: 35, category: 'halogen', valence: 7, mass: 79.904, massUnit: 'u'},
        'Kr': {name: 'Krypton', atomicNumber: 36, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶', electrons: 36, category: 'noble gas', valence: 8, mass: 83.798, massUnit: 'u'},
        'Rb': {name: 'Rubidium', atomicNumber: 37, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹', electrons: 37, category: 'alkali metal', valence: 1, mass: 85.468, massUnit: 'u'},
        'Sr': {name: 'Strontium', atomicNumber: 38, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s²', electrons: 38, category: 'alkaline earth metal', valence: 2, mass: 87.62, massUnit: 'u'},
        'Y': {name: 'Yttrium', atomicNumber: 39, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹', electrons: 39, category: 'transition metal', valence: 3, mass: 88.906, massUnit: 'u'},
        'Zr': {name: 'Zirconium', atomicNumber: 40, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d²', electrons: 40, category: 'transition metal', valence: 4, mass: 91.224, massUnit: 'u'},
        'Nb': {name: 'Niobium', atomicNumber: 41, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹ 4d⁴', electrons: 41, category: 'transition metal', valence: 5, mass: 92.906, massUnit: 'u'},
        'Mo': {name: 'Molybdenum', atomicNumber: 42, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹ 4d⁵', electrons: 42, category: 'transition metal', valence: 6, mass: 95.95, massUnit: 'u'},
        'Tc': {name: 'Technetium', atomicNumber: 43, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d⁵', electrons: 43, category: 'transition metal', valence: 7, mass: 98, massUnit: 'u'},
        'Ru': {name: 'Ruthenium', atomicNumber: 44, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹ 4d⁷', electrons: 44, category: 'transition metal', valence: 3, mass: 101.07, massUnit: 'u'},
        'Rh': {name: 'Rhodium', atomicNumber: 45, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹ 4d⁸', electrons: 45, category: 'transition metal', valence: 3, mass: 102.91, massUnit: 'u'},
        'Pd': {name: 'Palladium', atomicNumber: 46, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 4d¹⁰', electrons: 46, category: 'transition metal', valence: 0, mass: 106.42, massUnit: 'u'},
        'Ag': {name: 'Silver', atomicNumber: 47, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s¹ 4d¹⁰', electrons: 47, category: 'transition metal', valence: 1, mass: 107.87, massUnit: 'u'},
        'Cd': {name: 'Cadmium', atomicNumber: 48, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰', electrons: 48, category: 'transition metal', valence: 2, mass: 112.41, massUnit: 'u'},
        'In': {name: 'Indium', atomicNumber: 49, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p¹', electrons: 49, category: 'basic metal', valence: 3, mass: 114.82, massUnit: 'u'},
        'Sn': {name: 'Tin', atomicNumber: 50, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p²', electrons: 50, category: 'basic metal', valence: 4, mass: 118.71, massUnit: 'u'},
        'Sb': {name: 'Antimony', atomicNumber: 51, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p³', electrons: 51, category: 'metalloid', valence: 5, mass: 121.76, massUnit: 'u'},
        'Te': {name: 'Tellurium', atomicNumber: 52, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁴', electrons: 52, category: 'metalloid', valence: 6, mass: 127.60, massUnit: 'u'},
        'I': {name: 'Iodine', atomicNumber: 53, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁵', electrons: 53, category: 'halogen', valence: 7, mass: 126.90, massUnit: 'u'},
        'Xe': {name: 'Xenon', atomicNumber: 54, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶', electrons: 54, category: 'noble gas', valence: 8, mass: 131.29, massUnit: 'u'},
        'Cs': {name: 'Cesium', atomicNumber: 55, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s¹', electrons: 55, category: 'alkali metal', valence: 1, mass: 132.91, massUnit: 'u'},
        'Ba': {name: 'Barium', atomicNumber: 56, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s²', electrons: 56, category: 'alkaline earth metal', valence: 2, mass: 137.33, massUnit: 'u'},
        'La': {name: 'Lanthanum', atomicNumber: 57, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 5d¹', electrons: 57, category: 'lanthanide', valence: 3, mass: 138.91, massUnit: 'u'},
        'Ce': {name: 'Cerium', atomicNumber: 58, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹ 5d¹', electrons: 58, category: 'lanthanide', valence: 4, mass: 140.12, massUnit: 'u'},
        'Pr': {name: 'Praseodymium', atomicNumber: 59, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f³', electrons: 59, category: 'lanthanide', valence: 3, mass: 140.91, massUnit: 'u'},
        'Nd': {name: 'Neodymium', atomicNumber: 60, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁴', electrons: 60, category: 'lanthanide', valence: 3, mass: 144.24, massUnit: 'u'},
        'Pm': {name: 'Promethium', atomicNumber: 61, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁵', electrons: 61, category: 'lanthanide', valence: 3, mass: 145, massUnit: 'u'},
        'Sm': {name: 'Samarium', atomicNumber: 62, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁶', electrons: 62, category: 'lanthanide', valence: 3, mass: 150.36, massUnit: 'u'},
        'Eu': {name: 'Europium', atomicNumber: 63, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁷', electrons: 63, category: 'lanthanide', valence: 3, mass: 151.96, massUnit: 'u'},
        'Gd': {name: 'Gadolinium', atomicNumber: 64, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁷ 5d¹', electrons: 64, category: 'lanthanide', valence: 3, mass: 157.25, massUnit: 'u'},
        'Tb': {name: 'Terbium', atomicNumber: 65, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f⁹', electrons: 65, category: 'lanthanide', valence: 3, mass: 158.93, massUnit: 'u'},
        'Dy': {name: 'Dysprosium', atomicNumber: 66, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁰', electrons: 66, category: 'lanthanide', valence: 3, mass: 162.50, massUnit: 'u'},
        'Ho': {name: 'Holmium', atomicNumber: 67, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹¹', electrons: 67, category: 'lanthanide', valence: 3, mass: 164.93, massUnit: 'u'},
        'Er': {name: 'Erbium', atomicNumber: 68, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹²', electrons: 68, category: 'lanthanide', valence: 3, mass: 167.26, massUnit: 'u'},
        'Tm': {name: 'Thulium', atomicNumber: 69, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹³', electrons: 69, category: 'lanthanide', valence: 3, mass: 168.93, massUnit: 'u'},
        'Yb': {name: 'Ytterbium', atomicNumber: 70, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴', electrons: 70, category: 'lanthanide', valence: 3, mass: 173.05, massUnit: 'u'},
        'Lu': {name: 'Lutetium', atomicNumber: 71, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹', electrons: 71, category: 'lanthanide', valence: 3, mass: 174.97, massUnit: 'u'},
        'Hf': {name: 'Hafnium', atomicNumber: 72, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d²', electrons: 72, category: 'transition metal', valence: 4, mass: 178.49, massUnit: 'u'},
        'Ta': {name: 'Tantalum', atomicNumber: 73, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d³', electrons: 73, category: 'transition metal', valence: 5, mass: 180.95, massUnit: 'u'},
        'W': {name: 'Tungsten', atomicNumber: 74, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d⁴', electrons: 74, category: 'transition metal', valence: 6, mass: 183.84, massUnit: 'u'},
        'Re': {name: 'Rhenium', atomicNumber: 75, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d⁵', electrons: 75, category: 'transition metal', valence: 7, mass: 186.21, massUnit: 'u'},
        'Os': {name: 'Osmium', atomicNumber: 76, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d⁶', electrons: 76, category: 'transition metal', valence: 4, mass: 190.23, massUnit: 'u'},
        'Ir': {name: 'Iridium', atomicNumber: 77, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d⁷', electrons: 77, category: 'transition metal', valence: 3, mass: 192.22, massUnit: 'u'},
        'Pt': {name: 'Platinum', atomicNumber: 78, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s¹ 4f¹⁴ 5d⁹', electrons: 78, category: 'transition metal', valence: 2, mass: 195.08, massUnit: 'u'},
        'Au': {name: 'Gold', atomicNumber: 79, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s¹ 4f¹⁴ 5d¹⁰', electrons: 79, category: 'transition metal', valence: 1, mass: 196.97, massUnit: 'u'},
        'Hg': {name: 'Mercury', atomicNumber: 80, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰', electrons: 80, category: 'transition metal', valence: 2, mass: 200.59, massUnit: 'u'},
        'Tl': {name: 'Thallium', atomicNumber: 81, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p¹', electrons: 81, category: 'basic metal', valence: 3, mass: 204.38, massUnit: 'u'},
        'Pb': {name: 'Lead', atomicNumber: 82, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p²', electrons: 82, category: 'basic metal', valence: 4, mass: 207.2, massUnit: 'u'},
        'Bi': {name: 'Bismuth', atomicNumber: 83, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p³', electrons: 83, category: 'basic metal', valence: 5, mass: 208.98, massUnit: 'u'},
        'Po': {name: 'Polonium', atomicNumber: 84, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁴', electrons: 84, category: 'metalloid', valence: 6, mass: 209, massUnit: 'u'},
        'At': {name: 'Astatine', atomicNumber: 85, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁵', electrons: 85, category: 'halogen', valence: 7, mass: 210, massUnit: 'u'},
        'Rn': {name: 'Radon', atomicNumber: 86, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶', electrons: 86, category: 'noble gas', valence: 8, mass: 222, massUnit: 'u'},
        'Fr': {name: 'Francium', atomicNumber: 87, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s¹', electrons: 87, category: 'alkali metal', valence: 1, mass: 223, massUnit: 'u'},
        'Ra': {name: 'Radium', atomicNumber: 88, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s²', electrons: 88, category: 'alkaline earth metal', valence: 2, mass: 226, massUnit: 'u'},
        'Ac': {name: 'Actinium', atomicNumber: 89, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 6d¹', electrons: 89, category: 'actinide', valence: 3, mass: 227, massUnit: 'u'},
        'Th': {name: 'Thorium', atomicNumber: 90, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 6d²', electrons: 90, category: 'actinide', valence: 4, mass: 232.04, massUnit: 'u'},
        'Pa': {name: 'Protactinium', atomicNumber: 91, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f² 6d¹', electrons: 91, category: 'actinide', valence: 5, mass: 231.04, massUnit: 'u'},
        'U': {name: 'Uranium', atomicNumber: 92, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f³ 6d¹', electrons: 92, category: 'actinide', valence: 6, mass: 238.03, massUnit: 'u'},
        'Np': {name: 'Neptunium', atomicNumber: 93, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f⁴ 6d¹', electrons: 93, category: 'actinide', valence: 6, mass: 237, massUnit: 'u'},
        'Pu': {name: 'Plutonium', atomicNumber: 94, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f⁶', electrons: 94, category: 'actinide', valence: 6, mass: 244, massUnit: 'u'},
        'Am': {name: 'Americium', atomicNumber: 95, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f⁷', electrons: 95, category: 'actinide', valence: 6, mass: 243, massUnit: 'u'},
        'Cm': {name: 'Curium', atomicNumber: 96, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f⁷ 6d¹', electrons: 96, category: 'actinide', valence: 6, mass: 247, massUnit: 'u'},
        'Bk': {name: 'Berkelium', atomicNumber: 97, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f⁹', electrons: 97, category: 'actinide', valence: 6, mass: 247, massUnit: 'u'},
        'Cf': {name: 'Californium', atomicNumber: 98, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁰', electrons: 98, category: 'actinide', valence: 6, mass: 251, massUnit: 'u'},
        'Es': {name: 'Einsteinium', atomicNumber: 99, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹¹', electrons: 99, category: 'actinide', valence: 6, mass: 252, massUnit: 'u'},
        'Fm': {name: 'Fermium', atomicNumber: 100, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹²', electrons: 100, category: 'actinide', valence: 6, mass: 257, massUnit: 'u'},
        'Md': {name: 'Mendelevium', atomicNumber: 101, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹³', electrons: 101, category: 'actinide', valence: 6, mass: 258, massUnit: 'u'},
        'No': {name: 'Nobelium', atomicNumber: 102, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴', electrons: 102, category: 'actinide', valence: 6, mass: 259, massUnit: 'u'},
        'Lr': {name: 'Lawrencium', atomicNumber: 103, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹', electrons: 103, category: 'actinide', valence: 3, mass: 262, massUnit: 'u'},
        'Rf': {name: 'Rutherfordium', atomicNumber: 104, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d²', electrons: 104, category: 'transition metal', valence: 4, mass: 267, massUnit: 'u'},
        'Db': {name: 'Dubnium', atomicNumber: 105, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d³', electrons: 105, category: 'transition metal', valence: 5, mass: 268, massUnit: 'u'},
        'Sg': {name: 'Seaborgium', atomicNumber: 106, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁴', electrons: 106, category: 'transition metal', valence: 6, mass: 269, massUnit: 'u'},
        'Bh': {name: 'Bohrium', atomicNumber: 107, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁵', electrons: 107, category: 'transition metal', valence: 7, mass: 270, massUnit: 'u'},
        'Hs': {name: 'Hassium', atomicNumber: 108, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁶', electrons: 108, category: 'transition metal', valence: 8, mass: 270, massUnit: 'u'},
        'Mt': {name: 'Meitnerium', atomicNumber: 109, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁷', electrons: 109, category: 'transition metal', valence: 9, mass: 278, massUnit: 'u'},
        'Ds': {name: 'Darmstadtium', atomicNumber: 110, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁸', electrons: 110, category: 'transition metal', valence: 10, mass: 281, massUnit: 'u'},
        'Rg': {name: 'Roentgenium', atomicNumber: 111, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d⁹', electrons: 111, category: 'transition metal', valence: 11, mass: 282, massUnit: 'u'},
        'Cn': {name: 'Copernicium', atomicNumber: 112, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰', electrons: 112, category: 'transition metal', valence: 12, mass: 285, massUnit: 'u'},
        'Nh': {name: 'Nihonium', atomicNumber: 113, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p¹', electrons: 113, category: 'basic metal', valence: 3, mass: 286, massUnit: 'u'},
        'Fl': {name: 'Flerovium', atomicNumber: 114, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p²', electrons: 114, category: 'basic metal', valence: 4, mass: 289, massUnit: 'u'},
        'Mc': {name: 'Moscovium', atomicNumber: 115, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p³', electrons: 115, category: 'basic metal', valence: 5, mass: 290, massUnit: 'u'},
        'Lv': {name: 'Livermorium', atomicNumber: 116, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p⁴', electrons: 116, category: 'basic metal', valence: 6, mass: 293, massUnit: 'u'},
        'Ts': {name: 'Tennessine', atomicNumber: 117, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p⁵', electrons: 117, category: 'halogen', valence: 7, mass: 294, massUnit: 'u'},
        'Og': {name: 'Oganesson', atomicNumber: 118, config: '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d¹⁰ 4p⁶ 5s² 4d¹⁰ 5p⁶ 6s² 4f¹⁴ 5d¹⁰ 6p⁶ 7s² 5f¹⁴ 6d¹⁰ 7p⁶', electrons: 118, category: 'noble gas', valence: 8, mass: 294, massUnit: 'u'}
    };

    // Orbital capacities
    const orbitalCapacities = {
        's': 2,
        'p': 6,
        'd': 10,
        'f': 14
    };

    // Search history array
    let searchHistory = [];

    // 3D Model state
    let isRotating = true;
    let currentView = 'electrons';
    let currentElementSymbol = '';

    // Periodic table layout
    const periodicTableLayout = [
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 6, 7, 8, 9, 10],
        [11, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 14, 15, 16, 17, 18],
        [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36],
        [37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54],
        [55, 56, 57, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        [87, 88, 89, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 0, 0],
        [0, 0, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 0, 0]
    ];

    // Initialize periodic table
    function initPeriodicTable() {
        const table = document.getElementById('periodicTable');
        table.innerHTML = '';
        
        periodicTableLayout.forEach(row => {
            row.forEach(atomicNumber => {
                const cell = document.createElement('div');
                
                if (atomicNumber === 0) {
                    cell.className = 'empty-cell';
                    cell.innerHTML = '';
                } else {
                    // Find element by atomic number
                    const element = Object.values(elements).find(e => e.atomicNumber === atomicNumber);
                    const symbol = Object.keys(elements).find(key => elements[key] === element);
                    
                    cell.className = `element-cell ${getCategoryClass(element.category)}`;
                    cell.innerHTML = `
                        <div class="element-number">${atomicNumber}</div>
                        <div class="element-symbol">${symbol}</div>
                        <div class="element-mass">${element.mass} ${element.massUnit}</div>
                    `;
                    
                    cell.onclick = () => selectElement(symbol);
                    cell.title = `${element.name} (${symbol})\nAtomic Mass: ${element.mass} ${element.massUnit}\nCategory: ${element.category}`;
                }
                
                table.appendChild(cell);
            });
        });
    }

    function getCategoryClass(category) {
        const categoryMap = {
            'alkali metal': 'alkali-metal',
            'alkaline earth metal': 'alkaline-earth',
            'transition metal': 'transition-metal',
            'basic metal': 'basic-metal',
            'post-transition metal': 'basic-metal',
            'metalloid': 'metalloid',
            'nonmetal': 'nonmetal',
            'halogen': 'halogen',
            'noble gas': 'noble-gas',
            'lanthanide': 'lanthanide',
            'actinide': 'actinide'
        };
        return categoryMap[category] || 'transition-metal';
    }

    function selectElement(symbol) {
        document.getElementById('elementInput').value = symbol;
        searchElement();
    }

    function addToHistory(element, symbol) {
        // Remove if already in history
        searchHistory = searchHistory.filter(item => item.symbol !== symbol);
        
        // Add to beginning of history
        searchHistory.unshift({
            symbol: symbol,
            name: element.name,
            atomicNumber: element.atomicNumber,
            timestamp: new Date().toLocaleTimeString()
        });
        
        // Keep only last 10 items
        if (searchHistory.length > 10) {
            searchHistory = searchHistory.slice(0, 10);
        }
        
        updateHistoryDisplay();
    }

    function updateHistoryDisplay() {
        const historyItems = document.getElementById('historyItems');
        if (searchHistory.length === 0) {
            historyItems.innerHTML = '<div style="color: #82b1ff; font-size: 0.9rem;">No search history yet</div>';
            return;
        }
        
        historyItems.innerHTML = searchHistory.map(item => `
            <div class="history-item" onclick="selectFromHistory('${item.symbol}')">
                <i class="fas fa-atom"></i>
                ${item.symbol} (${item.name})
            </div>
        `).join('');
    }

    function selectFromHistory(symbol) {
        document.getElementById('elementInput').value = symbol;
        searchElement();
    }

    function clearSearchHistory() {
        searchHistory = [];
        updateHistoryDisplay();
    }

    function createOrbitalDiagram(element) {
        const config = element.config;
        const orbitals = [];
        
        // Parse configuration into orbitals
        const orbitalMatches = config.match(/(\d+[spdf])([¹²³⁴⁵⁶⁷⁸⁹⁰]*)/g);
        
        orbitalMatches.forEach(orbitalStr => {
            const match = orbitalStr.match(/(\d+)([spdf])([¹²³⁴⁵⁶⁷⁸⁹⁰]*)/);
            if (match) {
                const [, level, type, electronStr] = match;
                const electrons = electronStr ? 
                    electronStr.split('').map(char => 
                        '¹²³⁴⁵⁶⁷⁸⁹⁰'.indexOf(char) + 1
                    ).reduce((a, b) => a + b, 0) : 0;
                
                orbitals.push({
                    label: `${level}${type}`,
                    electrons: electrons,
                    capacity: orbitalCapacities[type],
                    type: type
                });
            }
        });
        
        // Create diagram HTML
        let diagramHTML = '';
        
        orbitals.forEach(orbital => {
            diagramHTML += `
                <div class="orbital-row">
                    <div class="orbital-label">${orbital.label}</div>
                    <div class="orbital-boxes">
            `;
            
            // Create boxes for each orbital position
            const positions = orbital.type === 's' ? 1 : 
                            orbital.type === 'p' ? 3 : 
                            orbital.type === 'd' ? 5 : 7;
            
            for (let i = 0; i < positions; i++) {
                const electronsInThisPosition = Math.min(2, Math.max(0, orbital.electrons - i * 2));
                
                if (electronsInThisPosition > 0) {
                    diagramHTML += `<div class="orbital-box">`;
                    
                    if (electronsInThisPosition > 0) {
                        diagramHTML += `<div class="arrow up">↑</div>`;
                    }
                    if (electronsInThisPosition > 1) {
                        diagramHTML += `<div class="arrow down">↓</div>`;
                    }
                    
                    diagramHTML += `</div>`;
                } else {
                    diagramHTML += `<div class="orbital-box empty-box"></div>`;
                }
            }
            
            diagramHTML += `
                    </div>
                    <div style="margin-left: 10px; font-size: 0.9em; color: #bb86fc;">
                        ${orbital.electrons}e⁻
                    </div>
                </div>
            `;
        });
        
        return diagramHTML;
    }

    function createDotStructure(element, symbol) {
        const valenceElectrons = element.valence;
        
        // Positions for dots around the element symbol (Lewis structure)
        const positions = [
            {top: '0%', left: '50%', transform: 'translateX(-50%)'}, // Top
            {top: '50%', right: '0%', transform: 'translateY(-50%)'}, // Right
            {bottom: '0%', left: '50%', transform: 'translateX(-50%)'}, // Bottom
            {top: '50%', left: '0%', transform: 'translateY(-50%)'}, // Left
            {top: '20%', right: '20%'}, // Top-right
            {bottom: '20%', right: '20%'}, // Bottom-right
            {bottom: '20%', left: '20%'}, // Bottom-left
            {top: '20%', left: '20%'} // Top-left
        ];
        
        let dotsHTML = '';
        
        for (let i = 0; i < 8; i++) {
            const style = positions[i];
            if (i < valenceElectrons) {
                dotsHTML += `
                    <div class="dot-position" style="top: ${style.top}; left: ${style.left}; right: ${style.right}; bottom: ${style.bottom}; transform: ${style.transform || 'none'}">
                        <div class="dot"></div>
                    </div>
                `;
            }
        }
        
        return `
            <div class="dot-element">
                <div class="element-symbol-large">${symbol}</div>
                ${dotsHTML}
            </div>
            <div style="color: #bb86fc; font-size: 0.9rem; text-align: center;">
                ${valenceElectrons} valence electron${valenceElectrons !== 1 ? 's' : ''}
            </div>
        `;
    }

    function create3DAtomicModel(element, symbol) {
        currentElementSymbol = symbol;
        
        // Parse electron configuration to determine shells
        const config = element.config;
        const shellData = {};
        
        // Extract shell information
        const orbitalMatches = config.match(/(\d+[spdf])([¹²³⁴⁵⁶⁷⁸⁹⁰]*)/g);
        
        orbitalMatches.forEach(orbitalStr => {
            const match = orbitalStr.match(/(\d+)([spdf])([¹²³⁴⁵⁶⁷⁸⁹⁰]*)/);
            if (match) {
                const [, level, type, electronStr] = match;
                const electrons = electronStr ? 
                    electronStr.split('').map(char => 
                        '¹²³⁴⁵⁶⁷⁸⁹⁰'.indexOf(char) + 1
                    ).reduce((a, b) => a + b, 0) : 0;
                
                if (!shellData[level]) {
                    shellData[level] = { electrons: 0, orbitals: [] };
                }
                shellData[level].electrons += electrons;
                shellData[level].orbitals.push({ type, electrons });
            }
        });
        
        // Create 3D model HTML
        let modelHTML = '<div class="nucleus"></div>';
        const shellCount = Object.keys(shellData).length;
        
        // Create electron shells
        Object.keys(shellData).forEach((shellLevel, index) => {
            const shellRadius = 30 + (index * 35);
            const shell = shellData[shellLevel];
            
            modelHTML += `
                <div class="electron-shell" style="width: ${shellRadius * 2}px; height: ${shellRadius * 2}px;">
                    <div class="electron-count">Shell ${shellLevel}: ${shell.electrons}e⁻</div>
                </div>
            `;
            
            // Create electrons for this shell
            const electronCount = Math.min(shell.electrons, 8); // Limit for visualization
            
            for (let i = 0; i < electronCount; i++) {
                const angle = (i / electronCount) * Math.PI * 2;
                const x = Math.cos(angle) * shellRadius;
                const y = Math.sin(angle) * shellRadius;
                const animationDuration = 5 + (index * 2);
                
                modelHTML += `
                    <div class="electron" style="
                        top: calc(50% + ${y}px);
                        left: calc(50% + ${x}px);
                        animation-name: electronOrbit${shellLevel};
                        animation-duration: ${animationDuration}s;
                    "></div>
                `;
                
                // Add CSS animation for this electron
                const style = document.createElement('style');
                style.innerHTML = `
                    @keyframes electronOrbit${shellLevel} {
                        0% {
                            transform: translate(-50%, -50%) rotate(0deg) translateX(${shellRadius}px) rotate(0deg);
                        }
                        100% {
                            transform: translate(-50%, -50%) rotate(360deg) translateX(${shellRadius}px) rotate(-360deg);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        });
        
        // Update model info
        document.getElementById('modelInfo').innerHTML = `
            ${element.name} (${symbol}) • Atomic Number: ${element.atomicNumber} • ${element.electrons} total electrons
        `;
        
        return modelHTML;
    }

    // 3D Model Controls
    function toggleRotation() {
        const atom3D = document.getElementById('atom3D');
        const btn = document.querySelector('.control-btn:nth-child(1)');
        
        if (isRotating) {
            atom3D.style.animationPlayState = 'paused';
            btn.innerHTML = '<i class="fas fa-play"></i> Resume Rotation';
        } else {
            atom3D.style.animationPlayState = 'running';
            btn.innerHTML = '<i class="fas fa-pause"></i> Pause Rotation';
        }
        
        isRotating = !isRotating;
    }

    function resetView() {
        const atom3D = document.getElementById('atom3D');
        atom3D.style.animation = 'rotateAtom 20s infinite linear';
        atom3D.style.animationPlayState = 'running';
        
        // Reset button text
        const btn = document.querySelector('.control-btn:nth-child(1)');
        btn.innerHTML = '<i class="fas fa-pause"></i> Pause Rotation';
        isRotating = true;
    }

    function changeView(viewType) {
        currentView = viewType;
        const shells = document.querySelectorAll('.electron-shell');
        const electrons = document.querySelectorAll('.electron');
        
        if (viewType === 'shells') {
            shells.forEach(shell => shell.style.border = '2px solid rgba(0, 229, 255, 0.6)');
            electrons.forEach(electron => electron.style.opacity = '0.3');
        } else {
            shells.forEach(shell => shell.style.border = '2px dashed rgba(0, 229, 255, 0.3)');
            electrons.forEach(electron => electron.style.opacity = '1');
        }
        
        // Update active button
        document.querySelectorAll('.control-btn').forEach(btn => {
            btn.style.background = 'rgba(57, 73, 171, 0.3)';
        });
        
        if (viewType === 'shells') {
            document.querySelector('.control-btn:nth-child(3)').style.background = 'rgba(57, 73, 171, 0.6)';
        } else {
            document.querySelector('.control-btn:nth-child(4)').style.background = 'rgba(57, 73, 171, 0.6)';
        }
    }

    function searchElement() {
        const input = document.getElementById('elementInput').value.trim();
        if (!input) return;
        
        let element = null;
        const searchKey = input.toLowerCase();
        
        if (elements[input]) {
            element = elements[input];
        }
        else if (/^\d+$/.test(input)) {
            const atomicNumber = parseInt(input);
            element = Object.values(elements).find(e => e.atomicNumber === atomicNumber);
        }
        else {
            element = Object.values(elements).find(e => e.name.toLowerCase().includes(searchKey));
        }
        
        if (element) {
            const elementSymbol = Object.keys(elements).find(k => elements[k] === element);
            displayResult(element, elementSymbol);
            addToHistory(element, elementSymbol);
        } else {
            document.getElementById('configDisplay').innerHTML = 'Element not found. Try "H", "Sodium", or "92"';
            document.getElementById('infoContent').innerHTML = 'Please enter a valid element symbol, name, or atomic number.';
            document.getElementById('visualizationsContainer').style.display = 'none';
        }
    }

    function displayResult(element, symbol) {
        // Display configuration
        const config = element.config;
        const blocks = config.split(' ');
        const configHTML = blocks.map(block => {
            const [orbital, electrons] = block.split(/(?=[¹²³⁴⁵⁶⁷⁸⁹⁰])/);
            return `<span class="config-block">${orbital}<sup>${electrons || ''}</sup></span>`;
        }).join(' ');
        
        document.getElementById('configDisplay').innerHTML = configHTML;
        
        // Get valence electrons
        const valenceElectrons = element.valence;
        
        // Display element info with atomic mass
        document.getElementById('infoContent').innerHTML = `
            <div class="info-grid">
                <div class="info-item">
                    <strong>Element Name:</strong>
                    ${element.name} (${symbol})
                </div>
                <div class="info-item">
                    <strong>Atomic Number:</strong>
                    ${element.atomicNumber}
                </div>
                <div class="info-item">
                    <strong>Total Electrons:</strong>
                    ${element.electrons}
                </div>
                <div class="info-item">
                    <strong>Element Category:</strong>
                    <span class="${getCategoryClass(element.category)}" style="padding: 4px 10px; border-radius: 5px; font-size: 0.9em; display: inline-block; margin-top: 5px;">
                        ${element.category}
                    </span>
                </div>
                <div class="info-item">
                    <strong>Atomic Mass:</strong><br>
                    <span style="font-size: 1.1em; color: #4caf50;">${element.mass} ${element.massUnit}</span>
                </div>
                <div class="info-item">
                    <strong>Valence Electrons:</strong><br>
                    <span style="font-size: 1.1em; color: #e91e63;">${valenceElectrons} e⁻</span>
                </div>
            </div>
            
            <div style="margin-top: 20px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #bb86fc;">
                <strong style="color: #bb86fc; display: block; margin-bottom: 10px;">
                    <i class="fas fa-lightbulb"></i> Quick Facts:
                </strong>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9em;">
                    <div>• Atomic mass is the weighted average of naturally occurring isotopes</div>
                    <div>• Valence electrons determine chemical bonding properties</div>
                    <div>• Electron configuration shows electron distribution in orbitals</div>
                    <div>• ${symbol} is a ${element.category} with ${element.electrons} total electrons</div>
                </div>
            </div>
        `;
        
        // Show visualizations
        document.getElementById('visualizationsContainer').style.display = 'grid';
        
        // Create orbital diagram
        document.getElementById('orbitalDiagram').innerHTML = createOrbitalDiagram(element);
        
        // Create electron dot structure
        document.getElementById('dotStructure').innerHTML = createDotStructure(element, symbol);
        
        // Create 3D atomic model
        document.getElementById('atom3D').innerHTML = create3DAtomicModel(element, symbol);
        
        // Set default view
        changeView('electrons');
    }

    function setExample(symbol) {
        document.getElementById('elementInput').value = symbol;
        searchElement();
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', () => {
        initPeriodicTable();
        
        document.getElementById('elementInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') searchElement();
        });

        // Initialize history display
        updateHistoryDisplay();

        // Start with an example
        setTimeout(() => {
            document.getElementById('elementInput').value = 'Na';
            searchElement();
        }, 1000);
    });
    </script>
</body>
</html>
